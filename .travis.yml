os: linux
dist: trusty
before_install:
  - sudo apt-get update
  - sudo apt-get install python3
addons:
  apt:
    packages:
      - docker-ce
  snaps:
  - name: dotnet-sdk
    classic: true
    channel: latest/beta
sudo: required
language: csharp
mono: none
env: DOTNETCORE=1
services:
  - docker
script:
  - sudo snap alias dotnet-sdk.dotnet dotnet
  - chmod +x ./deploy-envs.sh
  - chmod +x ./scripts/build.sh
  - chmod +x ./scripts/deploy.sh
  - cd scripts && ./build.sh
  - if [ "$TRAVIS_BRANCH" == "master" ]; then ./deploy.sh; fi